<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title><%= title || 'قائمة المستفيدين' %></title>
  <style>
    :root { --bg:#f6f9fc; --card:#fff; --text:#222; --muted:#666; --primary:#0a66ff; --border:#e6e9ee; }
    * { box-sizing: border-box; }
    body {
      font-family: "Tajawal", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0; padding: 24px;
    }
    .container {
       margin: 0 auto;
    }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.05);
      padding: 18px;
    }
    h1 {
      margin: 0 0 14px; font-size: 22px;
    }
    .toolbar {
      display: flex; gap: 10px; align-items: center; justify-content: space-between; margin-bottom: 12px; flex-wrap: wrap;
    }
    .toolbar .meta { color: var(--muted); font-size: 14px; }
    .search {
      display: flex; gap: 8px; align-items: center;
    }
    .search input, .search select {
      border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; background: #fff;
    }
    .search button {
      border: 0; padding: 8px 12px; border-radius: 10px; background: var(--primary); color: #fff; cursor: pointer;
    }
    .table-wrap { overflow:auto; border-radius: 10px; border:1px solid var(--border); }
    table {
      width: 100%; border-collapse: collapse; background:#fff; min-width:900px;
    }
    th, td {
      padding: 10px 12px; border-bottom: 1px solid var(--border); text-align: start; white-space: nowrap;
    }
    th {
      background: #f1f5fb; font-weight: 600; font-size: 13px;
      position: sticky; top: 0; z-index: 1;
    }
    tr:hover td { background: #fafcff; }
    .empty {
      text-align: center; color: var(--muted); padding: 26px; border: 1px dashed var(--border); border-radius: 12px; background: #fff;
    }
    .pagination {
      margin-top: 12px; display: flex; gap: 8px; align-items: center; justify-content: center; flex-wrap: wrap;
    }
    .pagination a, .pagination span {
      border: 1px solid var(--border); padding: 8px 12px; border-radius: 10px; text-decoration: none; color: var(--text); background:#fff;
    }
    .pagination .active { background: var(--primary); color: #fff; border-color: var(--primary); }
    .badge { background:#eef3ff; color:#2747d9; border:1px solid #dbe5ff; padding:2px 8px; border-radius: 999px; font-size:12px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>قائمة المستفيدين <span class="badge"><%=rows.length%></span></h1>


      <% if (!rows || rows.length === 0) { %>
        <div class="empty">No data to be shown</div>
      <% } else { %>
        <div class="table-wrap" style="font-size: 10pt;">
          <table>
            <thead>
              <tr>
               <!-- HOF_ID,HOF_FullName,Member_ID,Center_Name,Mobile -->
               <th>#</th> 
               <th>هوية العائبة</th>
                <th>اسم رب الاسرة</th>
                <th>هوية المستفيد</th>
                <th>اسم المستفيد</th>
                <th>الكمية</th>
                <th>استلم/لم يستلم</th>
                <th>مركز التسجيل</th>
                <th>الجوال</th>
                <th>وقت التسليم</th>
                <th>اسم المستلم</th>
                <th>مسؤول النظام</th>
              </tr>
            </thead>
            <tbody>
              <% rows.forEach((r, idx) => { %>
                <tr <%- (r.IsReceived === 1) ? 'style="background-color: lightgreen;"' : '' %>>
                    
                  <td><%= r.Serial %></td>
                  <td><%= r.HOF_ID %></td>
                  <td><%= r.HOF_FullName %></td>
                  <td><%= r.Member_ID %></td>
                  <td><%= r.Member_FullName  %></td>
                  <td><%= r.Quantity %></td>
                  <td><%= r.IsReceived == 0 ? 'لم يستلم' : 'استلم'   %></td>
                  <td><%= r.Center_Name || '' %></td>
                  <td><%= r.Mobile || '' %></td>
                  <td><%= r.DeliveryTime || '' %></td>
                  <td><%= r.RecieverName || '' %></td>
                  <td><%= r.DeviceName || '' %></td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      <% } %>

      
    </div>
  </div>
</body>
</html>
